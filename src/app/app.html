<mat-toolbar class="app-toolbar">
	@if (showBack()) {
	<button mat-icon-button [routerLink]="['/']" aria-label="Till startsidan">
		<mat-icon>arrow_back</mat-icon>
	</button>
	}

	<span class="title" [class.center]="showCenterTitle()">{{ title() }}</span>
	<span class="spacer"></span>

	@if (user()) {
	<!-- Trigger -->
	<button mat-icon-button [matMenuTriggerFor]="userMenu" aria-label="Användarmeny" class="avatar-btn">
		@if (user()?.photoURL) {
		<img [src]="user()!.photoURL!" alt="" />
		} @else {
		<span class="avatar-initials">{{ initials() }}</span>
		}
	</button>

	<!-- Menyn -->
	<mat-menu #userMenu="matMenu" xPosition="before" yPosition="below">
		<div class="theme-picker">
			@for (t of themes; track t.class) {
			<button
				class="theme-dot"
				[style.background]="t.color"
				(click)="setTheme(t.class)"
				[class.active]="t.class === currentTheme()"
				[title]="t.label"
				[attr.aria-label]="'Välj tema ' + t.label"
			></button>

			}
		</div>
		<button mat-menu-item disabled>
			<mat-icon>person</mat-icon>
			<span>{{ user()?.displayName || user()?.email }}</span>
		</button>
		<mat-divider></mat-divider>
		<button mat-menu-item routerLink="/"><mat-icon>home</mat-icon><span>Hem</span></button>

		<button mat-menu-item (click)="logout()"><mat-icon>logout</mat-icon><span>Logga ut</span></button>
	</mat-menu>

	} @else {
	<button mat-button (click)="login()">Logga in</button>
	}
</mat-toolbar>

<router-outlet />
